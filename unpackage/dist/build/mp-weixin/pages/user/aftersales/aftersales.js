(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/aftersales/aftersales"],{"4e1b":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("view",{staticClass:"top_tap"},t._l(t.tabs,function(e,a){return i("view",{key:a,staticClass:"top_tap_item",class:t.currentTab==a?"on":"",attrs:{eventid:"36287802-0-"+a},on:{tap:function(e){t.tabChange(a)}}},[t._v(t._s(e.name)),i("view",{staticClass:"line"})])})),t._l(t.list,function(e,a){return i("view",{key:a,staticClass:"order-item"},[i("view",{staticClass:"order-item-goods"},[i("goodsCard",{attrs:{goodsinfo:e,mpcomid:"36287802-0-"+a}})],1),i("view",{staticClass:"order-item-state padding-content flex-con justify-end"},[0==t.currentTab?i("view",{staticClass:"order-item-des flex-con"},[i("text",[t._v("订单号: "+t._s(e.order_no))])]):t._e(),0!=t.currentTab?i("view",{staticClass:"order-item-des flex-con"},[i("image",{attrs:{src:1==e.type?"/static/img/application_icon_exchange.png":"/static/img/application_icon_return.png",mode:"widthFix"}}),t._v(t._s(1==e.type?"换货申请":"退货申请")),i("text",{class:1==e.status?"order-afteron":"order-afteroff"},[t._v(t._s(e.status_text))])]):t._e(),i("view",{staticClass:"order-item-btns flex-con justify-end"},[t._l(e.btn,function(n,o){return i("button",{key:o,staticClass:"cancel",attrs:{eventid:"36287802-1-"+a+"-"+o},on:{tap:function(i){t.operate(e,a,n.operate)}}},[t._v(t._s(n.status_text))])}),0==t.currentTab?i("button",{staticClass:"cancel",attrs:{eventid:"36287802-2-"+a},on:{tap:function(i){t.applyAfter(e.enable_apply,e.order_goods_id)}}},[t._v("申请售后")]):t._e()],2)])])}),i("loadMore",{attrs:{loadingType:t.loadingType,contentText:t.contentText,mpcomid:"36287802-1"}}),i("naData",{attrs:{nodata:t.nodata,nodataText:t.nodataText,mpcomid:"36287802-2"}}),i("loading",{attrs:{isLoading:t.isLoading,mpcomid:"36287802-3"}}),t.writeNo?i("view",{staticClass:"mask"},[i("view",{staticClass:"write_box"},[i("view",{staticClass:"write_box_title"},[t._v("填写单号")]),i("picker",{staticClass:"delivery_picker",attrs:{value:t.deliver_index,range:t.company,"range-key":"freight_name",eventid:"36287802-3"},on:{change:t.bindPickerChange}},[i("view",{staticClass:"picker"},[t._v("物流公司选择："+t._s(t.company[t.deliver_index].freight_name))])]),i("input",{attrs:{placeholder:"填写订单号",type:"number",maxlength:"20",eventid:"36287802-4"},on:{input:t.getDeliveryNo}}),i("view",{staticClass:"write_box_btn"},[i("view",{attrs:{eventid:"36287802-5"},on:{tap:t.cancelWriteNo}},[t._v("取消")]),i("view",{attrs:{eventid:"36287802-6"},on:{tap:t.submitWriteNo}},[t._v("确定")])])],1)]):t._e()],2)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"5ffc":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(i("fa81")),n=r(i("1473")),o=r(i("9110")),s=r(i("3764"));function r(t){return t&&t.__esModule?t:{default:t}}var l={components:{goodsCard:a.default,loadMore:n.default,naData:o.default,loading:s.default},data:function(){return{currentTab:0,tabs:[{name:"申请售后",url:"/api/aftersale/getEnableApply"},{name:"处理中",url:"/api/aftersale/getApplying"},{name:"申请记录",url:"/api/aftersale/getList"}],upDate:!1,page_num:1,page_size:5,list:[],nodata:!1,nodataText:"还没有相关订单哦~",loadingType:0,company:[],writeNo:!1,deliver_index:0,deliveryNo:0,afteId:0,isLoading:!1}},onLoad:function(){this.showLoading(),this.getList(),this.getDeliveryCompany()},onShow:function(){this.upDate&&(this.list=[],this.getList())},onPullDownRefresh:function(){var e=this;this.loadingType=0,setTimeout(function(){e.list=[],e.page_num=1,e.getList(),t.stopPullDownRefresh()},800)},onReachBottom:function(){if(0===this.loadingType){this.loadingType=1;this.page_num;this.page_num=this.page_num+1,console.log(this.page_num),this.getList()}},methods:{tabChange:function(t){this.currentTab=t,this.loadingType=0,this.page_num=1,this.list=[],this.showLoading(),this.getList()},showLoading:function(){var t=this;this.isLoading=!0,setTimeout(function(){t.isLoading=!1},800)},getList:function(){var t=this;this.nodata=!1,this.$api.get(this.tabs[this.currentTab].url,{page_num:this.page_num,page_size:this.page_size},function(e){if(console.log(e),200==e.data.code){var i=t.list,a=e.data.data;setTimeout(function(e){0==i.length?(t.loadingType=0,a.length<=0?t.nodata=!0:t.list=a):a.length<=0?t.loadingType=2:(t.loadingType=0,t.list=i.concat(a))},800)}})},applyAfter:function(e,i){e?t.navigateTo({url:"apply/apply?id="+i}):t.showModal({title:"",content:"请先联系客服后再操作哦",showCancel:!1,success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})},operate:function(e,i,a){console.log(e);var n=this;this.afteId=e.id,"cancelApply"==a&&t.showModal({title:"确认取消申请吗?",confirmColor:"#e9101f",success:function(t){t.confirm&&n.sendOP(e.id,i,a)}}),"writeDeliverNo"==a&&(n.writeNo=!0),"getDeliveryInfo"==a&&t.navigateTo({url:"../orders/logistics/logistics?from=1&id="+e.id})},getDeliveryCompany:function(){var e=this;this.$api.get("/api/freight/getDeliveryCompany",null,function(i){200==i.data.code?(console.log(i),e.company=i.data.data):t.showToast({title:i.data.msg,icon:"none"})})},bindPickerChange:function(t){this.deliver_index=t.detail.value},getDeliveryNo:function(t){this.deliveryNo=t.detail.value},cancelWriteNo:function(){this.deliver_index=0,this.writeNo=!1},sendOP:function(e,i,a){var n=this;this.$api.get("/api/aftersale/cancelApply",{aftersale_id:e},function(e){console.log(e),200==e.data.code?(t.showToast({title:"操作成功"}),n.list=[],n.page_num=1,n.getList()):t.showToast({title:e.data.msg,icon:"none"})})},submitWriteNo:function(){var e=this;this.$api.post("/api/aftersale/writeDeliverNo",{aftersale_id:this.afteId,delivery_no:this.deliveryNo,delivery_company_id:this.company[this.deliver_index].id},function(i){console.log(i),200==i.data.code?(t.showToast({title:"操作成功"}),e.writeNo=!1,e.list=[],e.getList()):t.showToast({title:i.data.msg,icon:"none"})})}}};e.default=l}).call(this,i("543d")["default"])},"62b9":function(t,e,i){"use strict";i.r(e);var a=i("5ffc"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},"95a8":function(t,e,i){"use strict";var a=i("a90c"),n=i.n(a);n.a},a90c:function(t,e,i){},ae16:function(t,e,i){"use strict";i("c0c8");var a=o(i("b0ce")),n=o(i("e531"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(n.default))},e531:function(t,e,i){"use strict";i.r(e);var a=i("4e1b"),n=i("62b9");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("95a8");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,null,null);e["default"]=r.exports}},[["ae16","common/runtime","common/vendor"]]]);