(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"0222":function(t,e,a){"use strict";a("c0c8");var o=s(a("b0ce")),i=s(a("50d9"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(i.default))},"0fa9":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"search-wrap active fix-top flex-con"},[a("view",{staticClass:"search-box padding-content flex-con"},[a("image",{attrs:{src:"/static/img/com_search.png",alt:"",mode:"widthFix"}}),a("input",{attrs:{type:"text",placeholder:"请输入您想要的商品","confirm-type":"search",value:t.keywords,eventid:"2275bf9b-0"},on:{confirm:t.getSearch,focus:t.isSearch}})])]),t.showHot?a("block",[a("view",{staticClass:"zone_title flex-con"},[a("image",{attrs:{src:"/static/img/search_hot.png",alt:"",mode:"widthFix"}})]),a("view",{staticClass:"goods_wrap"},t._l(t.HotsaleGoods,function(e,o){return a("view",{key:o},[a("goods",{attrs:{goodsinfo:e,field:t.field,mpcomid:"2275bf9b-0-"+o}})],1)}))]):t._e(),a("view",{staticClass:"goods_wrap",class:{martop20:t.list.length>0}},t._l(t.list,function(e,o){return a("view",{key:o},[a("goods",{attrs:{goodsinfo:e,field:t.field,mpcomid:"2275bf9b-1-"+o}})],1)})),a("view",{staticClass:"toTop",class:{active:t.backTopValue},attrs:{eventid:"2275bf9b-1"},on:{tap:t.backTop}},[a("image",{attrs:{src:"/static/img/top.png"}})]),a("loadMore",{attrs:{loadingType:t.loadingType,contentText:t.contentText,mpcomid:"2275bf9b-2"}}),a("naData",{attrs:{nodata:t.nodata,nodataText:t.nodataText,mpcomid:"2275bf9b-3"}}),a("loading",{attrs:{isLoading:t.isLoading,mpcomid:"2275bf9b-4"}})],1)},i=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return i})},"50d9":function(t,e,a){"use strict";a.r(e);var o=a("0fa9"),i=a("b255");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a("525f");var n=a("2877"),c=Object(n["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=c.exports},"525f":function(t,e,a){"use strict";var o=a("74f8"),i=a.n(o);i.a},"74f8":function(t,e,a){},9742:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(a("9b12")),i=r(a("1473")),s=r(a("9110")),n=r(a("3764")),c=a("2f62");function r(t){return t&&t.__esModule?t:{default:t}}var d={components:{goods:o.default,loadMore:i.default,naData:s.default,loading:n.default},computed:(0,c.mapState)(["globalData"]),data:function(){return{HotsaleGoods:[],showHot:!0,page_num:1,page_size:5,list:[],nodata:!1,nodataText:"当前没有相关商品~",loadingType:0,field:0,keywords:"",isLoading:!1,backTopValue:!1,isSearching:!1,searchCache:[],isVip:!1}},onPageScroll:function(t){var e=t.scrollTop,a=e>400;this.backTopValue=a},onPullDownRefresh:function(){var e=this;console.log(this.keywords),""!=this.keywords&&(this.loadingType=0,setTimeout(function(){e.list=[],e.page_num=1,e.getList(),t.stopPullDownRefresh()},800))},onReachBottom:function(){if(""!=this.keywords){if(0!==this.loadingType)return;this.loadingType=1;this.page_num;this.page_num=this.page_num+1,console.log(this.page_num),this.getList()}},onLoad:function(){this.getCache(),this.$store.state.globalData.userInfo.is_member&&(this.isVip=!0,this.getHotsaleGoods())},methods:{showLoading:function(){var t=this;this.isLoading=!0,setTimeout(function(){t.isLoading=!1},800)},getCache:function(){var e=t.getStorageSync("searchCache");this.searchCache=e||[]},putCache:function(e){var a=this.searchCache;a.unshift(e);for(var o=[],i=0;i<a.length;i++)-1==o.indexOf(a[i])&&o.push(a[i]);t.setStorage({key:"searchCache",data:o})},removeSearchCache:function(){t.removeStorageSync("searchCache"),this.getCache()},isSearch:function(){this.isSearching=!1,this.nodata=!1,this.list=[],this.getCache()},getHotsaleGoods:function(){var t=this;this.$api.get("/api/index/getHotSearch",{},function(e){console.log(e),200==e.data.code&&(t.HotsaleGoods=e.data.data)})},getSearch:function(t){console.log(t),this.keywords=t.target?t.target.value:t,this.showLoading(),this.getList(),this.nodata=!1,this.isSearching=!0},getList:function(){var t=this;this.nodata=!1,this.showHot=!1,this.putCache(this.keywords),this.$api.get("/api/index/searchGoods",{keywords:this.keywords,page_size:8,page_num:1},function(e){if(console.log(e),200==e.data.code){var a=t.list,o=e.data.data;setTimeout(function(e){0==a.length?(t.loadingType=0,o.length<=0?t.nodata=!0:t.list=o):o.length<=0?t.loadingType=2:(t.loadingType=0,t.list=a.concat(o))},800)}})}}};e.default=d}).call(this,a("543d")["default"])},b255:function(t,e,a){"use strict";a.r(e);var o=a("9742"),i=a.n(o);for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);e["default"]=i.a}},[["0222","common/runtime","common/vendor"]]]);