(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/tabbar-3/tabbar-3"],{"0ac7":function(t,e,a){"use strict";var i=a("3d5f"),n=a.n(i);n.a},2307:function(t,e,a){"use strict";a.r(e);var i=a("aa0e"),n=a("9fc3");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("0ac7");var o=a("2877"),c=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},"3d5f":function(t,e,a){},"909c":function(t,e,a){"use strict";a("c0c8");var i=s(a("b0ce")),n=s(a("2307"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},"9fc3":function(t,e,a){"use strict";a.r(e);var i=a("df86"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},aa0e:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[t.isVip?a("view",{staticClass:"top_tap fix-top"},t._l(t.tabs,function(e,i){return a("view",{key:i,staticClass:"top_tap_item",class:t.currentTab==i?"on":"",attrs:{eventid:"7eb52712-0-"+i},on:{tap:function(e){t.tabChange(i)}}},[t._v(t._s(e))])})):t._e(),t.nodata?t._e():a("block",[a("view",{staticClass:"top-menu",class:{fixed90:t.isVip}},[a("view",{staticClass:"top-menu-con  padding-content flex-con justify-bet"},[a("label",[a("checkbox",{attrs:{value:"selectAll",checked:t.selectAll,eventid:"7eb52712-1"},on:{tap:t.selAll}}),t._v("全选")],1),a("view",{class:{active:t.isEdit},attrs:{eventid:"7eb52712-2"},on:{tap:t.editIng}},[t._v("编辑")])],1)]),a("view",{staticClass:"cart",class:{mar184:t.isVip}},[t._l(t.list,function(e,i){return a("view",{key:i,staticClass:"padding-content flex-con cart-item"},[a("checkbox",{attrs:{value:"",checked:e.checked,eventid:"7eb52712-3-"+i},on:{tap:function(a){t.changeCheck(i,e.id,1)}}}),a("view",{staticClass:"goods_card_container",attrs:{eventid:"7eb52712-5-"+i},on:{tap:function(a){t.goDetail(e)}}},[a("goodsCard",{attrs:{showNum:t.isShowNum,id:e.id,num:e.number,goodsinfo:e,eventid:"7eb52712-4-"+i,mpcomid:"7eb52712-0-"+i},on:{itemNum:t.setGoodsNum}})],1)],1)}),t._l(t.overdueList,function(e,i){return a("view",{key:i,staticClass:"padding-content flex-con cart-item overdueList"},[a("view",{staticClass:"flex-con-col"},[t.isEdit?a("view",{staticClass:"overdue overdue-del",attrs:{eventid:"7eb52712-6-"+i},on:{tap:function(a){t.delOverdue(e,i)}}},[t._v("删除")]):a("view",{staticClass:"overdue"},[t._v("失效")])]),a("navigator",{staticClass:"goods_card_container",attrs:{url:"/pages/goods_detail/goods_detail?id="+e.field_id+"&field="+t.currentTab}},[a("goodsCard",{attrs:{showNum:t.isShowNum,id:e.id,num:e.number,goodsinfo:e,eventid:"7eb52712-7-"+i,mpcomid:"7eb52712-1-"+i},on:{itemNum:t.setGoodsNum}}),a("view",{staticClass:"overdue-reason"},[t._v("套餐已失效或商品已下架")])],1)],1)})],2)]),t.list.length>0?a("view",{staticClass:"bottom-menu fix-bottom"},[t.isEdit?a("view",{staticClass:"bottom-menu-con padding-content flex-con justify-end"},[a("button",{staticClass:"del-butt",attrs:{eventid:"7eb52712-8"},on:{tap:t.deleteCargo}},[t._v("删除")])],1):a("view",{staticClass:"bottom-menu-con padding-content flex-con justify-bet"},[a("view",{staticClass:"total flex-con"},[t._v("合计"),a("view",{staticClass:"flex-con total-price"},[a("view",{staticClass:"total-price-sym"},[t._v("￥")]),t._v(t._s(t.listInfo.amount))])]),a("button",{attrs:{eventid:"7eb52712-9"},on:{tap:t.goPay}},[t._v("去结算("+t._s(t.cargoNum)+")")])],1)]):t._e(),a("naData",{attrs:{nodata:t.nodata,nodataText:t.nodataText,nodataImg:t.nodataImg,mpcomid:"7eb52712-2"}}),a("login",{attrs:{showmask:t.ismask,mpcomid:"7eb52712-3"}})],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},df86:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(a("fa81")),n=o(a("9110")),s=o(a("fc17"));function o(t){return t&&t.__esModule?t:{default:t}}var c={components:{goodsCard:i.default,naData:n.default,login:s.default},data:function(){return{isShowNum:!0,selectAll:!1,list:[],ismask:!1,overdueList:[],listInfo:{},currentTab:0,isEdit:!1,cargoNum:0,tabs:["热卖专区","购物商城","积分商城"],isVip:0,nodata:!1,nodataText:"购物车为空",nodataImg:"/static/img/empty_cart.png"}},onLoad:function(){},onShow:function(){this.isVip=this.$store.state.globalData.userInfo.is_member,this.getList()},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"龙腾虎跃商城",path:"/pages/tabbar/tabbar-1/tabbar-1",imageUrl:"/static/img/logo.png"}},methods:{setGoodsNum:function(t){this.changeNum(t)},editIng:function(){this.isEdit=!this.isEdit},goPay:function(){if(0==this.cargoNum)return t.showToast({title:"请先选中商品哦~",icon:"none"});0==this.currentTab?t.navigateTo({url:"/pages/pay/pay"}):t.navigateTo({url:"/pages/pay/otherpay/otherpay?field="+this.currentTab})},tabChange:function(t){this.currentTab=t,this.getList()},getList:function(){var t=this;this.$api.get("/api/cart/getList",{field:this.currentTab},function(e){if(console.log(e),200==e.data.code){t.listInfo=e.data.data;var a=e.data.data.list,i=[],n=[];if(0==a.length)t.list=a,t.nodata=!0;else{t.nodata=!1;for(var s=0;s<a.length;s++)1==a[s].is_valid?i.push(a[s]):n.push(a[s]);console.log(i,n),t.list=i,t.overdueList=n,t.isCheckedAll()}}})},goDetail:function(e){t.navigateTo({url:"/pages/goods_detail/goods_detail?id="+e.field_id+"&field="+this.currentTab})},selAll:function(){var t=this,e=this.list;t.selectAll=!t.selectAll;var a="";for(var i in e)e[i].checked=t.selectAll,a+=e[i].id+",";t.list=e,a=a.slice(0,a.length-1),t.changeCheck(null,a)},changeNum:function(e){var a=this;this.$api.get("/api/cart/changeNum",{cart_id:e.id,num:e.num},function(e){200!=e.data.code?t.showToast({title:e.data.msg,icon:"none"}):a.getList()})},changeCheck:function(e,a){var i=this;if(null!=e){var n=this.list;n[e].checked=0==n[e].checked?1:0,i.list=n,i.isCheckedAll()}this.$api.get("/api/cart/changeChecked",{field:this.currentTab,cart_id:a},function(e){200==e.data.code?i.getList():t.showToast({title:e.data.msg,icon:"none"})})},isCheckedAll:function(){var t=this,e=0,a=0;for(var i in t.list)1==t.list[i].checked&&(e++,a+=t.list[i].number);t.cargoNum=a,e==t.list.length?t.selectAll=!0:t.selectAll=!1},deleteCargo:function(){var e=this;t.showModal({title:"确认删除选中商品吗?",confirmColor:"#e9101f",success:function(a){if(a.confirm){var i=e.list,n="";for(var s in i)1==i[s].checked&&(n+=i[s].id+",");n=n.slice(0,n.length-1),e.$api.get("/api/cart/delCart",{cart_id:n},function(a){200==a.data.code?(e.getList(),e.isEdit=!1):t.showToast({title:a.data.msg,icon:"none"})})}}})},delOverdue:function(e,a){var i=this;t.showModal({title:"确认删除选中商品吗?",confirmColor:"#e9101f",success:function(a){a.confirm&&i.$api.get("/api/cart/delCart",{cart_id:e.id},function(e){200==e.data.code?(i.getList(),i.isEdit=!1):t.showToast({title:e.data.msg,icon:"none"})})}})}}};e.default=c}).call(this,a("543d")["default"])}},[["909c","common/runtime","common/vendor"]]]);