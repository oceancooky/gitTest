(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods_detail/goods_detail"],{"0e85":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"content"},[s("view",{staticClass:"page-section swiper"},[s("view",{staticClass:"page-section-spacing"},[s("swiper",{staticClass:"swiper",attrs:{circular:"true","indicator-dots":!1,autoplay:!1,duration:500,eventid:"0cd4c4ca-1"},on:{change:t.getIndex}},t._l(t.goodspic,function(e,i){return s("swiper-item",{key:i,attrs:{mpcomid:"0cd4c4ca-0-"+i}},[s("view",{staticClass:"swiper-item"},[s("image",{attrs:{src:e,eventid:"0cd4c4ca-0-"+i},on:{tap:function(e){t.previewImage(i)}}})])])})),s("view",{staticClass:"pic_index"},[t._v(t._s(t.picIndex)+"/"+t._s(t.goodspic.length))])],1)]),s("view",{staticClass:"goods-maininfo"},[s("view",{staticClass:"price flex-con"},[s("view",{staticClass:"r-price"},[t._v("￥"),s("view",[t._v(t._s(t.goods.price))])]),s("view",{staticClass:"o-price"},[t._v("￥"+t._s(t.goods.origin_price))])]),s("view",{staticClass:"title"},[t._v(t._s(t.goods.name))]),s("view",{staticClass:"subtilte"},[t._v(t._s(t.goods.intro))]),s("view",{staticClass:"flex-con justify-bet title-sub"},[s("view",[t._v("销量："+t._s(t.goods.sale))]),s("view",[t._v("运费："+t._s(t.goods.postage>0?t.goods.postage:"免运费"))])])]),s("view",{staticClass:"selected padding-content flex-con more more-b more-r",attrs:{eventid:"0cd4c4ca-2"},on:{tap:t.selectOp}},[t._v("已选"),s("view",{},[t._v(t._s(t.selectSpecTxet))])]),s("view",{staticClass:"padding-content menu menu-title bor-bot"},[t._v("产品详情")]),s("view",{staticClass:"detial-content"},[s("rich-text",{attrs:{nodes:t.Html,mpcomid:"0cd4c4ca-1"}})],1),s("view",{staticClass:"bottom-menu fix-bottom"},[s("view",{staticClass:"bottom-menu-con flex-con"},[s("view",{staticClass:"s-btn flex-con-col"},[s("image",{attrs:{src:"/static/img/details_icon_cus.png",mode:"widthFix"}}),t._v("客服"),t.customerOnline?s("button",{attrs:{"open-type":"contact"}}):s("button",{attrs:{eventid:"0cd4c4ca-3"},on:{tap:t.showTips}})],1),s("navigator",{staticClass:"s-btn flex-con-col",attrs:{url:"/pages/tabbar/tabbar-3/tabbar-3","open-type":"switchTab"}},[s("image",{attrs:{src:"/static/img/details_icon_cart.png",mode:"widthFix"}}),t._v("购物车")]),s("view",{staticClass:"sub-btn",attrs:{eventid:"0cd4c4ca-4"},on:{tap:function(e){t.operateType(0)}}},[t._v("加入购物车")]),s("view",{staticClass:"sub-btn buynow",attrs:{eventid:"0cd4c4ca-5"},on:{tap:function(e){t.operateType(1)}}},[t._v("立即购买")])],1)]),t.popUp?s("view",{staticClass:"popup",attrs:{eventid:"0cd4c4ca-6"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.moveHandle(e)},tap:t.hidePop}}):t._e(),s("view",{staticClass:"select-pop",class:{active:t.popUp},attrs:{eventid:"0cd4c4ca-17"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.moveHandle(e)}}},[s("view",{staticClass:"close-btn",attrs:{eventid:"0cd4c4ca-7"},on:{tap:t.hidePop}}),s("view",{staticClass:"padding-top20 flex-con justify-bet slelect-content"},[s("view",{staticClass:"selectImg flex-con"},[s("image",{attrs:{src:t.selectSpec.selectImg,mode:"widthFix"}})]),s("view",{staticClass:"selectInfo flex-con-col"},[s("view",{staticClass:"selectPrice flex-con"},[t._v("价格：￥"+t._s(t.selectSpec.selectPrice)),s("view",[t._v("￥"+t._s(t.selectSpec.selectOriginPrice))])]),s("view",{staticClass:"selectSpec"},[t._v("已选择："+t._s(t.selectSpecTxet))])])]),s("scroll-view",{staticClass:"spec-croll",attrs:{"scroll-y":"true"}},[t._l(t.specList,function(e,i){return s("view",{key:i},[s("view",{staticClass:"selec-title padding-content martop20 font-bold"},[t._v(t._s(e.key))]),s("view",{staticClass:"padding-content flex-con specWrap"},t._l(e.value,function(c,o){return s("view",{key:o,staticClass:"spec-view martop20",class:o==e.checked?"seleType":"",attrs:{eventid:"0cd4c4ca-8-"+i+"-"+o},on:{tap:function(e){t.sleType(i,o)}}},[t._v(t._s(c))])}))])}),2==t.field?s("block",[s("view",{staticClass:"selec-title padding-content martop20 font-bold"},[t._v("购买类型")]),s("view",{staticClass:"padding-content flex-con specWrap"},[s("view",{staticClass:"spec-view martop20",class:2==t.buyType?"seleType":"",attrs:{eventid:"0cd4c4ca-9"},on:{tap:function(e){t.sleBuyType(2)}}},[t._v("代售")]),s("view",{staticClass:"spec-view martop20",class:1==t.buyType?"seleType":"",attrs:{eventid:"0cd4c4ca-10"},on:{tap:function(e){t.sleBuyType(1)}}},[t._v("自用")])])]):t._e(),s("view",{staticClass:"selec-title padding-content martop20 font-bold flex-con justify-bet"},[t._v("购买数量"),s("view",{staticClass:"goods-card-num flex-con"},[s("button",{attrs:{eventid:"0cd4c4ca-11"},on:{tap:function(e){t.calNum(-1)}}}),s("input",{attrs:{type:"number",placeholder:"1",value:t.num,eventid:"0cd4c4ca-12"},on:{blur:t.getInputNum}}),s("button",{attrs:{eventid:"0cd4c4ca-13"},on:{tap:function(e){t.calNum(1)}}})],1)])],2),t.isDone?s("view",{staticClass:"submit-btn flex-con"},[s("button",{staticClass:"add-cart",attrs:{eventid:"0cd4c4ca-14"},on:{tap:t.addCart}},[t._v("加入购物车")]),s("button",{attrs:{eventid:"0cd4c4ca-15"},on:{tap:t.buyNow}},[t._v("立即购买")])],1):s("view",{staticClass:"submit-btn flex-con"},[s("button",{attrs:{eventid:"0cd4c4ca-16"},on:{tap:t.confirm}},[t._v("确定")])],1)],1),t.showTipBox?s("view",{staticClass:"tip-wrap",attrs:{eventid:"0cd4c4ca-19"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.moveHandle(e)}}},[s("view",{staticClass:"tip-box flex-con-col"},[s("view",{staticClass:"tip-title"},[t._v("当前不在工作时间范围内，请您晚点再来咨询呀~")]),s("button",{staticClass:"tip_confirm_btn",attrs:{eventid:"0cd4c4ca-18"},on:{tap:t.showTips}},[s("text",[t._v("我知道了")])])],1)]):t._e(),s("login",{attrs:{showmask:t.ismask,mpcomid:"0cd4c4ca-2"}})],1)},c=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return c})},"1b90":function(t,e,s){"use strict";s("c0c8");var i=o(s("b0ce")),c=o(s("6c94"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(c.default))},"22af":function(t,e,s){"use strict";s.r(e);var i=s("3450"),c=s.n(i);for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);e["default"]=c.a},3450:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(s("fc17"));function c(t){return t&&t.__esModule?t:{default:t}}var o={components:{login:i.default},data:function(){return{ismask:!1,picIndex:1,popUp:!1,id:"",goods:{},goodspic:[],Html:"",specList:{},selectSpec:{},selectSpecTxet:"",buyType:1,num:1,isDone:!1,opType:1,field:0,customerOnline:!0,showTipBox:!1}},onShow:function(){this.getCustomerTime()},onLoad:function(e){t.showNavigationBarLoading(),this.id=e.id,this.field=e.field,this.getdetail()},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:this.goods.name,path:"/pages/goods_detail/goods_detail?id="+this.id+"&field="+this.field,imageUrl:this.goodspic[0]}},methods:{getIndex:function(t){this.picIndex=t.detail.current+1},getdetail:function(){var e=this;this.$api.get("/api/goods/detail",{field_id:this.id,field:this.field},function(s){if(console.log(s),t.hideNavigationBarLoading(),200==s.data.code){var i=s.data.data;e.goods=i,e.goodspic=i.photo_images,e.Html=e.formatImg(i.content),i.spec_group.length>0?e.dealSpec():(console.log("单规格"),e.selectSpecTxet=i.default_spec_text,e.selectSpec={selectid:i.products.id,selectImg:i.products.image?i.products.image:i.thumb_image,selectPrice:i.products.price,selectOriginPrice:i.products.origin_price})}else t.showToast({title:s.data.msg,icon:"none"}),setTimeout(function(){t.navigateBack()},1e3)})},formatImg:function(t){var e=t.replace(/<img[^>]*>/gi,function(t,e){t=t.replace(/style=\"(.*)\"/gi,'style="width: 100%;display: block;float: left;"');return t});return e},dealSpec:function(){for(var t=this.goods.spec_group,e=this.goods.default_spec_text,s=0;s<t.length;s++)for(var i=0;i<t[s].value.length;i++)-1!=e.indexOf(t[s].value[i])&&(t[s].checked=i);this.specList=t,this.specResult()},specResult:function(){for(var t="",e=this.specList,s=0;s<e.length;s++){var i=e[s].checked;t=t+e[s].value[i]+","}t=t.slice(0,t.length-1),this.selectSpecTxet=t,this.selectSpec={selectid:this.goods.products[t].id,selectImg:this.goods.products[t].image?this.goods.products[t].image:this.goods.thumb_image,selectPrice:this.goods.products[t].price,selectOriginPrice:this.goods.products[t].origin_price},console.log(this.selectSpec.selectid,this.selectSpecTxet)},calNum:function(e){this.num=this.num+e,this.num<=0&&(this.num=1,t.showToast({title:"数量最小为1",icon:"none"}))},getInputNum:function(t){this.num=Number(t.detail.value)},sleBuyType:function(t){this.buyType=t},sleType:function(t,e){var s=this,i=this.specList;i[t].checked=e,s.specList={},s.specList=i,s.specResult()},operateType:function(t){this.opType=t,this.showPop()},buyNow:function(){var e=this;this.$api.post("/api/order/directOrder",{field_id:this.id,field:this.field,field_product_id:this.selectSpec.selectid,number:this.num,type:this.buyType},function(s){console.log(s),200==s.data.code?0==e.field?t.navigateTo({url:"/pages/pay/pay"}):t.navigateTo({url:"/pages/pay/otherpay/otherpay?field="+e.field}):t.showToast({title:s.data.msg,icon:"none"})})},addCart:function(){this.$api.get("/api/cart/addCart",{field_id:this.goods.id,field:this.field,field_product_id:this.selectSpec.selectid,num:this.num,type:this.buyType},function(e){console.log(e);var s=200==e.data.code?"success":"none";t.showToast({title:e.data.msg,icon:s})})},confirm:function(){this.hidePop(),0==this.opType?this.addCart():this.buyNow()},selectOp:function(){this.isDone=!0,this.showPop()},showPop:function(){this.popUp=!0},hidePop:function(){this.popUp=!1,this.isDone=!1},getCustomerTime:function(){var t=this;this.$api.get("/api/common/getContent",{},function(e){console.log(e),200==e.data.code&&(t.customerOnline=e.data.data.customer_online.flag)})},showTips:function(){this.showTipBox=!this.showTipBox},previewImage:function(e){t.previewImage({current:this.goodspic[e],urls:this.goodspic})}}};e.default=o}).call(this,s("543d")["default"])},"6c94":function(t,e,s){"use strict";s.r(e);var i=s("0e85"),c=s("22af");for(var o in c)"default"!==o&&function(t){s.d(e,t,function(){return c[t]})}(o);s("9853");var a=s("2877"),n=Object(a["a"])(c["default"],i["a"],i["b"],!1,null,null,null);e["default"]=n.exports},"70d6":function(t,e,s){},9853:function(t,e,s){"use strict";var i=s("70d6"),c=s.n(i);c.a}},[["1b90","common/runtime","common/vendor"]]]);